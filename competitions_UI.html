<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–Ω–∫—É—Ä—Å—ã</title>
    <script src="https://telegram.org/js/telegram-web-app.js" async></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 100%;
            padding: 16px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 24px 16px;
            text-align: center;
            border-radius: 0 0 20px 20px;
            margin-bottom: 24px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }

        .header p {
            opacity: 0.9;
            font-size: 0.95rem;
        }

        .competition-list {
            display: grid;
            gap: 16px;
            margin-bottom: 24px;
        }

        .competition-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            border-left: 4px solid #667eea;
        }

        .competition-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }

        .competition-card h3 {
            color: #333;
            margin-bottom: 8px;
            font-size: 1.2rem;
        }

        .competition-meta {
            display: flex;
            gap: 16px;
            margin-top: 12px;
            font-size: 0.9rem;
            color: #666;
        }

        .competition-meta span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            margin-top: 8px;
        }

        .status.active {
            background-color: #e8f5e9;
            color: #2e7d32;
        }

        .status.ended {
            background-color: #ffebee;
            color: #c62828;
        }

        .status.upcoming {
            background-color: #e3f2fd;
            color: #1565c0;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s;
            width: 100%;
            margin-top: 16px;
        }

        .btn:hover {
            opacity: 0.9;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: #6c757d;
            margin-top: 8px;
        }

        .detail-page {
            display: none;
        }

        .back-button {
            background: none;
            border: none;
            color: #667eea;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
            cursor: pointer;
            padding: 8px 0;
        }

        .detail-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            border-radius: 20px;
            margin-bottom: 24px;
        }

        .detail-header h1 {
            font-size: 1.8rem;
            margin-bottom: 12px;
        }

        .prize {
            font-size: 1.4rem;
            font-weight: bold;
            color: #ffd700;
            margin: 16px 0;
        }

        .description {
            background: white;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .description h3 {
            margin-bottom: 12px;
            color: #333;
        }

        .rules {
            background: white;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .rules ul {
            padding-left: 20px;
            margin-top: 12px;
        }

        .rules li {
            margin-bottom: 8px;
        }

        .registration-form {
            background: white;
            padding: 24px;
            border-radius: 12px;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .success-message {
            background: #e8f5e9;
            color: #2e7d32;
            padding: 16px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
            display: none;
        }

        .loader {
            display: none;
            text-align: center;
            padding: 40px;
            color: #667eea;
        }

        .no-competitions {
            text-align: center;
            padding: 40px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –∫–æ–Ω–∫—É—Ä—Å–æ–≤ -->
        <div id="mainPage">
            <div class="header">
                <h1>üöÄ –ö–æ–Ω–∫—É—Ä—Å—ã –∏ –¢—É—Ä–Ω–∏—Ä—ã</h1>
                <p>–£—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ –∫–æ–Ω–∫—É—Ä—Å–∞—Ö –∏ –≤—ã–∏–≥—Ä—ã–≤–∞–π—Ç–µ –ø—Ä–∏–∑—ã!</p>
            </div>

            <div id="competitionList" class="competition-list">
                <!-- –°–ø–∏—Å–æ–∫ –∫–æ–Ω–∫—É—Ä—Å–æ–≤ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∑–¥–µ—Å—å -->
                <div class="loader" id="mainLoader">
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω–∫—É—Ä—Å–æ–≤...</p>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª–µ–π –∫–æ–Ω–∫—É—Ä—Å–∞ -->
        <div id="detailPage" class="detail-page">
            <button class="back-button" onclick="goBack()">
                ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
            </button>

            <div id="competitionDetail">
                <!-- –î–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—É—Ä—Å–∞ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
                <div class="loader" id="detailLoader">
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...</p>
                </div>
            </div>
        </div>

        <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
        <div id="successMessage" class="success-message">
            <h3>‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!</h3>
            <p>–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –∫–æ–Ω–∫—É—Ä—Å. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.</p>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        const tg = window.Telegram.WebApp;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        tg.expand();
        tg.ready();

        // –î–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—É—Ä—Å–æ–≤ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–∞)
        const competitions = [
            {
                id: 1,
                title: "–•–∞–∫–∞—Ç–æ–Ω –ø–æ –í–µ–±-–†–∞–∑—Ä–∞–±–æ—Ç–∫–µ 2024",
                description: "–°–æ–∑–¥–∞–π—Ç–µ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞ 48 —á–∞—Å–æ–≤. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏.",
                detailedDescription: "–ü—Ä–∏–≥–ª–∞—à–∞–µ–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π –ø—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ –Ω–∞—à–µ–º –µ–∂–µ–≥–æ–¥–Ω–æ–º —Ö–∞–∫–∞—Ç–æ–Ω–µ. –¢–µ–º–∞ —ç—Ç–æ–≥–æ –≥–æ–¥–∞ - '–ò–Ω–Ω–æ–≤–∞—Ü–∏–∏ –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö'. –£—á–∞—Å—Ç–Ω–∏–∫–∞–º –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Å–æ–∑–¥–∞—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ä–µ—à–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ —Å—Ñ–µ—Ä–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è.",
                prize: "–ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏–∑: 100,000 ‚ÇΩ",
                rules: [
                    "–ö–æ–º–∞–Ω–¥—ã –æ—Ç 2 –¥–æ 5 —á–µ–ª–æ–≤–µ–∫",
                    "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª—é–±—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π —Ä–∞–∑—Ä–µ—à–µ–Ω–æ",
                    "–ü—Ä–æ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º",
                    "–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –¥–µ–Ω—å"
                ],
                deadline: "2024-06-15",
                startDate: "2024-06-01",
                status: "active",
                participants: 128,
                maxParticipants: 200
            },
            {
                id: 2,
                title: "–ö–æ–Ω–∫—É—Ä—Å –î–∏–∑–∞–π–Ω–∞ UI/UX",
                description: "–°–æ–∑–¥–∞–π—Ç–µ –ª—É—á—à–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–∞–Ω–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è.",
                detailedDescription: "–ö–æ–Ω–∫—É—Ä—Å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –ø–æ–∏—Å–∫ —Ç–∞–ª–∞–Ω—Ç–ª–∏–≤—ã—Ö –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤, —Å–ø–æ—Å–æ–±–Ω—ã—Ö —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–µ –∏ –∫—Ä–∞—Å–∏–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã. –£—á–∞—Å—Ç–Ω–∏–∫–∞–º –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–ª–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±—É–¥—É—â–µ–≥–æ.",
                prize: "–ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥: 75,000 ‚ÇΩ",
                rules: [
                    "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ —É—á–∞—Å—Ç–∏–µ",
                    "–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ —ç–∫—Ä–∞–Ω–æ–≤",
                    "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º",
                    "–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Figma"
                ],
                deadline: "2024-05-30",
                startDate: "2024-05-01",
                status: "active",
                participants: 89,
                maxParticipants: 150
            },
            {
                id: 3,
                title: "AI/ML –ß–µ–ª–ª–µ–Ω–¥–∂",
                description: "–†–∞–∑—Ä–∞–±–æ—Ç–∞–π—Ç–µ –º–æ–¥–µ–ª—å –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Ä—ã–Ω–æ—á–Ω—ã—Ö —Ç—Ä–µ–Ω–¥–æ–≤.",
                detailedDescription: "–°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ –ø–æ –º–∞—à–∏–Ω–Ω–æ–º—É –æ–±—É—á–µ–Ω–∏—é –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–ª—É—á–∞—Ç –¥–æ—Å—Ç—É–ø –∫ —É–Ω–∏–∫–∞–ª—å–Ω–æ–º—É –¥–∞—Ç–∞—Å–µ—Ç—É –∏ –¥–æ–ª–∂–Ω—ã –±—É–¥—É—Ç —Å–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å —Å –Ω–∞–∏–ª—É—á—à–µ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π.",
                prize: "1 –º–µ—Å—Ç–æ: 50,000 ‚ÇΩ + —Å—Ç–∞–∂–∏—Ä–æ–≤–∫–∞",
                rules: [
                    "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –∏–ª–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–µ —É—á–∞—Å—Ç–∏–µ (–¥–æ 3 —á–µ–ª–æ–≤–µ–∫)",
                    "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞",
                    "–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –Ω–∞ GitHub",
                    "–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞"
                ],
                deadline: "2024-07-20",
                startDate: "2024-07-01",
                status: "upcoming",
                participants: 45,
                maxParticipants: 100
            }
        ];

        // –¢–µ–∫—É—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∫–æ–Ω–∫—É—Ä—Å
        let currentCompetition = null;

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∫–æ–Ω–∫—É—Ä—Å–æ–≤
        function loadCompetitions() {
            const container = document.getElementById('competitionList');
            const loader = document.getElementById('mainLoader');
            
            loader.style.display = 'none';
            
            if (competitions.length === 0) {
                container.innerHTML = `
                    <div class="no-competitions">
                        <h3>üòî –ö–æ–Ω–∫—É—Ä—Å–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                        <p>–ù–æ–≤—ã–µ –∫–æ–Ω–∫—É—Ä—Å—ã –ø–æ—è–≤—è—Ç—Å—è —Å–∫–æ—Ä–æ. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = competitions.map(comp => `
                <div class="competition-card" onclick="showCompetitionDetail(${comp.id})">
                    <h3>${comp.title}</h3>
                    <p>${comp.description}</p>
                    <div class="competition-meta">
                        <span>üìÖ –î–æ ${formatDate(comp.deadline)}</span>
                        <span>üë• ${comp.participants}/${comp.maxParticipants}</span>
                    </div>
                    <span class="status ${comp.status}">
                        ${getStatusText(comp.status)}
                    </span>
                </div>
            `).join('');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—É—Ä—Å–∞
        function showCompetitionDetail(id) {
            currentCompetition = competitions.find(c => c.id === id);
            
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('detailPage').style.display = 'block';
            document.getElementById('successMessage').style.display = 'none';

            const detailContainer = document.getElementById('competitionDetail');
            const loader = document.getElementById('detailLoader');
            
            loader.style.display = 'none';

            detailContainer.innerHTML = `
                <div class="detail-header">
                    <h1>${currentCompetition.title}</h1>
                    <div class="prize">üèÜ ${currentCompetition.prize}</div>
                    <div class="competition-meta">
                        <span>üìÖ –ù–∞—á–∞–ª–æ: ${formatDate(currentCompetition.startDate)}</span>
                        <span>‚è∞ –î–µ–¥–ª–∞–π–Ω: ${formatDate(currentCompetition.deadline)}</span>
                        <span>üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏: ${currentCompetition.participants}/${currentCompetition.maxParticipants}</span>
                    </div>
                    <span class="status ${currentCompetition.status}">
                        ${getStatusText(currentCompetition.status)}
                    </span>
                </div>

                <div class="description">
                    <h3>üìù –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω–∫—É—Ä—Å–∞</h3>
                    <p>${currentCompetition.detailedDescription}</p>
                </div>

                <div class="rules">
                    <h3>üìã –ü—Ä–∞–≤–∏–ª–∞ —É—á–∞—Å—Ç–∏—è</h3>
                    <ul>
                        ${currentCompetition.rules.map(rule => `<li>${rule}</li>`).join('')}
                    </ul>
                </div>

                <div class="registration-form" id="registrationForm">
                    <h3>üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –∫–æ–Ω–∫—É—Ä—Å</h3>
                    <div class="form-group">
                        <label for="userName">–í–∞—à–µ –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—è *</label>
                        <input type="text" id="userName" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" required>
                    </div>
                    <div class="form-group">
                        <label for="userEmail">Email *</label>
                        <input type="email" id="userEmail" placeholder="ivan@example.com" required>
                    </div>
                    <div class="form-group">
                        <label for="userTelegram">Telegram username</label>
                        <input type="text" id="userTelegram" placeholder="@username">
                    </div>
                    <div class="form-group">
                        <label for="userMessage">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</label>
                        <textarea id="userMessage" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ–µ–º –æ–ø—ã—Ç–µ –∏–ª–∏ –∏–¥–µ—è—Ö..."></textarea>
                    </div>
                    
                    ${currentCompetition.status === 'active' ? `
                        <button class="btn" onclick="registerForCompetition()" id="registerBtn">
                            –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                        </button>
                    ` : `
                        <button class="btn" disabled>
                            ${currentCompetition.status === 'ended' ? '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞' : '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–∫–æ—Ä–æ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è'}
                        </button>
                    `}
                </div>
            `;
        }

        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –∫–æ–Ω–∫—É—Ä—Å
        function registerForCompetition() {
            const userName = document.getElementById('userName').value;
            const userEmail = document.getElementById('userEmail').value;
            const userTelegram = document.getElementById('userTelegram').value;
            const userMessage = document.getElementById('userMessage').value;
            const registerBtn = document.getElementById('registerBtn');

            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            if (!userName || !userEmail) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                return;
            }

            // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
            registerBtn.disabled = true;
            registerBtn.textContent = '–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º...';

            // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            setTimeout(() => {
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç fetch –∑–∞–ø—Ä–æ—Å –∫ API
                console.log('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞:', {
                    competitionId: currentCompetition.id,
                    userName,
                    userEmail,
                    userTelegram,
                    userMessage,
                    telegramData: tg.initDataUnsafe // –î–∞–Ω–Ω—ã–µ Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                });

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
                document.getElementById('registrationForm').style.display = 'none';
                document.getElementById('successMessage').style.display = 'block';
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
                currentCompetition.participants++;
                
                // –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–∞
                if (tg.sendData) {
                    const data = {
                        action: 'register',
                        competitionId: currentCompetition.id,
                        userName: userName,
                        userEmail: userEmail
                    };
                    tg.sendData(JSON.stringify(data));
                }
            }, 1500);
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ru-RU', {
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });
        }

        function getStatusText(status) {
            const statusMap = {
                'active': '–ò–¥–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è',
                'ended': '–ó–∞–≤–µ—Ä—à–µ–Ω',
                'upcoming': '–°–∫–æ—Ä–æ –Ω–∞—á–Ω–µ—Ç—Å—è'
            };
            return statusMap[status] || status;
        }

        function goBack() {
            document.getElementById('detailPage').style.display = 'none';
            document.getElementById('mainPage').style.display = 'block';
            document.getElementById('successMessage').style.display = 'none';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            loadCompetitions();
            
            // –ï—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –º–æ–∂–Ω–æ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
            if (tg.initDataUnsafe.user) {
                const user = tg.initDataUnsafe.user;
                console.log('Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:', user);
            }
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π Telegram WebApp
        tg.onEvent('viewportChanged', () => {
            tg.expand();
        });
    </script>
</body>

</html>
